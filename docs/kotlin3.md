# 함수

## 3.1 함수

- 선언방법

```kotlin
fun name(paramete: dataType): returnType {
    function body
}
```

- 반환 값이 없을 경우 자동으로 Unit
- 코틀린에서 반환되지 않는 타입은 unit을 사용
  - void 와 흡사하지만 반환 값이 없음을 의미
  - `return Unit`이 생략되어있음
- 함수가 return 문 하나라면 생략 가능
  - `fun sum(a: Int, b: Int): Int = a + b`
  - `fun sum(a: Int, b: Int) = a + b`
- 최상위 함수는 어디있어도 읽을 수 있다.
  - 호출시 선언순서가 중요하지 않다.
- 함수 안에 함수선언도 가능하다.
- 지역함수
  - 특정 지역내에만 존재
  - 호출시 순서 중요
- 가변 변수
  - vararg 키워드 사용
  - 인자를 1개 이상 받을 수 있음
- 함수와 스택 프레임 이해하기
  - main 함수의 프레임 생성
  - 지역변수들, 항스택, 상수 풀 등이 생성

## 3.3 함수형 프로그래밍

- 코틀린은 멀티 패러다임 언어
- 함수형 프로그래밍
  - 함수 자체를 가지고 여러가지 기법을 구현한 것
  - 입력 처리 출력
  - 코드를 간략하게 할 수 있음
  - 테스트가 용이함
  - 재사용성이 증가함
  - 람다식과 고차함수를 사용하여 구성한다. (대표적인 특징)
    - 함수 자체도 함수의 Input으로 사용할 수 있다.
  - 순수함수
- 순수함수(pure function)
  - 부작용이 없는 함수
    - 동일한 입력에 대해서는 항상 같은 결과를 출력한다.
    - 값이 항상 예측가능해야한다. 결정적(deterministic)이다.
  - 같은 인자에 대하여 항상 같은 값을 반환
  - 함수 외부의 어떤 상태도 바꾸지 않는다.
  - 함수와 함수를 서로 전달하기 위해서 필요한 개념
- 순수함수를 사용하는 이유
  - 입력과 내용을 분리하고 모듈화 > 재사용성이 높아짐
    - 여러 함수를 조합해도 부작용이 없다.
  - 특정 상태에 영향을 주지 않으므로 병행 작업이 가능
  - 함수의 값을 추적하고 예측할 수 있기 때문에, 테스트, 디버깅에 유리
- 함수형 프로그래밍에 적용
  - 함수를 매개변수, 인자, 반환값에 적용
  - 변수나 데이터 구조에 저장
  - 유연성 증가
- 람다식
  - 익명 함수
  - 람다식 예시
    - `{ x, y -> x + y }`
  - 람다식의 이용
    - 고차 함수에서 인자, 결과값 반환등이 가능
- 일급 객체(First Class Citizen)
  - 일급 객체는 함수의 인자로 전달할 수 있다.
  - 일급 객체는 함수의 반환값에 사용할 수 있다.
  - 일급 객체는 변수에 담을 수 있다.
  - 코틀린에서 함수는 1급 객체로 다룬다.(1급 함수라고도 한다)
- 고차 함수(High-order function)

```kotlin
fun highFunc(sum: (Int, Int) -> Int, a: Int, b: Int): Int = sum(a, b)
```

- 매개변수 `sum`은 `(Int, Int) -> Int`형태의 람다식
- 매개변수 `a`와 `b`가 `sum`의 인자로 사용된다.
- 매개변수로 람다식을 넘길 때는 마지막 매개변수로 보내는게 좋음
  - 중괄호를 빼낼 수 있어 모양이 읽기 좋아진다.
  - 식이 길어질 때 줄바꿈해서 읽기 좋게 변경할 수 있다.
- 함수형 프로그래밍을 사용하는 이유
  - 간략한 표현식을 사용해 생산성이 높아진다.
  - 람다식과 고차함수를 사용하여 다양한 함수 조합을 사용할 수 있다.
- 순수함수를 조합해 상태 데이터 변경이나 람다식을 사용하여 고차함수를 구성할 수 있다.
