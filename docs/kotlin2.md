# kotlin 2장

## 2-1 변수형과 자료형

### 자료형

- Int
- String
- Float
- ...

### 변수

- val(value) - 불변형(immutable)
  - 선언, 초기화 후 값을 바꿀 수 없음
- var(variable) - 가변형(mutable)
  - 초기 값을 넣어줘도, 나중에 값을 바꿀 수 있음
- 선언 방법
  - `val username: String = "Kildong"`
  - `선언 키워드, 변수이름, 자료형, = 값`
  - 자료형 부분은 추론이 가능할 경우 생략할 수 있다.
  - 자료형 없이 선언만 할 경우는 사용불가능하다.
    - 추론 불가능하기 때문
  - 변수 이름 규칙
    - 숫자로 시작하지 말 것
    - 코틀린 키워드는 사용 불가능 (while, if)
    - 의미 있는 단어를 사용할 것
    - camelCase 사용할 것

### 자료형

- 코틀린은 기본적으로 참조형 자료형을 사용한다.
  - 코틀린 컴파일러가 참조형 객체를 기본형으로 변경시켜준다.
- 기본형(Primitive Type)
  - 프로그래밍 언어에 내장 (코틀린에서는 사용되지 않음)
- 참조형(Reference Type)
  - 객체를 생성하고 동적 공간에 데이털르 둔 다음 참조하는 방식
- 변수에 담을 수 있는 크기가 정해져있다.
- 부호(+, -)가 있는 자료형과 없는 자료형을 나눌 수 있음
- `_`를 사용해서 숫자표기를 할 수 있음
  - 읽기 편하다.
- 실수 자료형은 IEEE 754 표기법을 사용
  - Double 8 byte
  - Float 4 byte
  - 부동 소수점 방식의 연산의 단점
    - 소수가 정확하게 표현되지 않음
- 음수 표현은 2의 보수를 사용
  - 절대값의 이진수에 값을 뒤집고 1을 더함
- 그 밖의 자료형
  - 논리형 Boolean
  - 문자 자료형 Char
  - 문자열 String
    - String Pool 이라는 특수한 공간에 할당된다.
    - var로 선언한 무자열 이라도 문자열 내용 자체는 String Pool에 할당되므로 바뀌지 않고, 참조한 주소값만 바뀌게 됨
- 표현식에서 문자열
  - $과 ${}을 사용해서 문자열 출력 가능

## 2-2 NULL

- `val a: Int`, `var b: String` : null인 상태
  - kotlin은 기본적으로 null을 허용하지 않는다. (초기화가 반드시 일어나야 함)
- null가능한 선언
  - `val a: Int?`, `var b: String?`
  - 초기화가 필요 없음
  - 하지만, null일 가능성이 존재하기 때문에 null 체크해줘야 한다.
    - NPE발생
      - Null Pointer Exception
      - null인 변수에 접근하면서 발생
- kotlin에서는 기본적으로 NOT NULL
  - nullable 표현에만 ?를 사용한다.
- safe call과 non-null 단정기호 활용
  - `?.`, `!!.`
  - non-null 단정기호는 왠만하면 사용하지 말자
  - `str1?.length ?: -1`
    - 엘비스 연산자를 사용하자.

## 2-3 검사와 자료형을 변환해보기

### 코틀린의 자료형 변환

- kotlin은 기본적으로 참조형 자료형을 사용
- 서로 다른 자료형은 변환 과정을 거친 후 비교
- 변환 메서드의 이용 > 자료형 변환
- 표현식에서 자료형의 자동 변환
- 변환 메서드의 종류
  - toByte
  - toLong
  - toShort
  - toFloat
  - toInt
  - toDouble
  - toChar
- 기본형과 참조형 자료형의 비교 원리
  - 이중 등호(==)와 삼중 등호(===)의 사용
  - 이중 등호의 경우 값만 비교
  - 삼중 등호의 경우 참조 주소를 비교
  - java의 경우 ==가 삼중 등호의 역할을 함께함
- 코틀린에서는 참조형으로 선언한 변수의 값이 -128~127 범위에 있으면 캐시에 그 값을 저장
  - 객체를 생성하지 않음
- 스마트 캐스트
  - 구체적으로 명시되지 않은 자료형을 자동으로 변환
    - 값에 따라 자료형을 결정
    - Number형은 숫자를 저장하기 위한 특수한 자료형으로 스마트 캐스트 됨
      - Int, Long, Short ... 다양한 숫자 클래스의 상위 클래스
- is 키워드를 사용한 자료형 검사
- Any
  - 자료형이 정해지지 않은 경우
  - 모든 클래스의 뿌리
  - 언제든 필요한 자료형으로 자동 변환(스마트 캐스트)
    - `clazz.javaClass` 를 통해 클래스타입 확인 가능
  - Any형으로 인자를 받는 함수 만들기

## 2-4 연산자를 조합해 다양한 식 만들기

- 연산자
  - 산술 연산자
    - +, -, \*, /, %
  - 대입 연산자
    - =, +=, -=, \*=, /=, %=
  - 증감 연산자
    - ++, --
    - 붙은 위치에 따라 전위/후위연산자로 구분, 값이 달라진다.
  - 비교 연산자
    - `>, <, >=, <=, ==, !=, ===, !==`
  - 논리 연산자
    - `&&, ||, !`
  - 비트 연산자
    - 비트 연산은 이진법 체계에서 다룸
    - shl(bits)
    - 중위 표현법으로 표현할 수 있음 4 shl 3
    - shl(부호있음), shr(부호있음), ushr(부호없음), and, or, xor, inv
